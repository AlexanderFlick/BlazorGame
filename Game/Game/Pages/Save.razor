@page "/save"
@using Game.Data;
@using Game.Data.Save;
@using Game.Pages.Components
@using Game.Services;
@inject ISaveService SaveService
@inject NavigationManager NavigationManager

<div>
    <h3>Save</h3>

    <EditForm Model="@saveFile" OnSubmit="@HandleSubmit">
        <label>
            Save
            <InputCheckbox @bind-Value="@saveFile.Saving"></InputCheckbox>
        </label>

        <label>
            Load
            <InputCheckbox @bind-Value="@saveFile.Loading"></InputCheckbox>
        </label>
        <br />
        <button type="submit">Submit</button>
    </EditForm>
    <BackButton />
</div>

@code {
    [CascadingParameter]
    public Player Player { get; set; }

    private SaveFile saveFile = new();

    public void HandleSubmit()
    {
        if (saveFile.Saving)
        {
            SaveService.Save(Player, saveFile.Path);
        }

        if (saveFile.Loading)
        {
            Player = SaveService.Load(saveFile.Path);
        }
    }
}